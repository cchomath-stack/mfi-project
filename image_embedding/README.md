# 수학 문제 이미지 임베딩 도구 사용 설명서

이 프로그램은 Postgres 데이터베이스의 수학 문제 이미지를 읽어 Google SigLIP 모델을 통해 임베딩을 생성하고 다시 저장하는 배치 도구입니다.

## 1. 설치 및 배포 방법 (메인 컴퓨터)

이 **`image_embedding` 폴더 전체**를 메인 컴퓨터의 원하는 위치로 복사하세요.

### 필수 조건
- **Python 3.9 이상**이 설치되어 있어야 합니다. (설치 시 'Add Python to PATH' 옵션 체크 권장)
- 인터넷 연결이 필요합니다. (모델 다운로드 및 이미지 로드용)

## 2. 실행 방법

1.  **`run_embedding.bat`** 파일을 더블 클릭합니다.
2.  프로그램이 실행되면 자동으로 다음과 같은 작업을 수행합니다:
    - 가상 환경(venv) 생성 및 필요한 라이브러리 자동 설치 (최초 1회)
    - 데이터베이스 연결 및 테이블 생성 (`problem_image_embeddings`)
    - 기존 통계 정보 출력 (마지막 실행일, 총 처리 수, 신규 문항 수)
    - 신규 문항에 대한 임베딩 생성 및 저장

## 3. 기능 안내

-   **증분 처리**: 이미 임베딩이 생성된 문항은 건너뛰고, 새로 추가된 문항만 골라서 처리합니다.
-   **실시간 통계**: 실행 시 현재 DB 상태를 한눈에 확인할 수 있습니다.
-   **SigLIP 모델**: 이미지의 전체적인 레이아웃과 수학적 기호의 특징을 정교하게 포착합니다.

## 4. 환경 설정 (.env)

현재 제공된 `.env` 파일에 이미 데이터베이스 접속 정보가 포함되어 있습니다. 정보가 변경될 경우 해당 파일을 메모장으로 열어 수정하세요.
